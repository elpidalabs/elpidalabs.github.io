<!DOCTYPE html>
<html>
<head>
  <title>Hello World</title>
  <link rel="stylesheet" type="text/css" href="styles.css">
 
  <script>
    function toggleTOC() {
      var toc = document.getElementById("table-of-contents");
      if (toc.style.display === "none") {
        toc.style.display = "block";
      } else {
        toc.style.display = "none";
      }
    }

    function showPopup(event, element) {
      const footnote = document.getElementById("footnote1");
      const content = footnote ? footnote.innerHTML : ''; 
      element.nextElementSibling.innerHTML = content;

      const rect = event.target.getBoundingClientRect();
      const viewportWidth = window.innerWidth;
      const viewportHeight = window.innerHeight;
      const popupWidth = element.nextElementSibling.offsetWidth;
      const popupHeight = element.nextElementSibling.offsetHeight;
      
      let x = rect.left + window.scrollX;
      let y = rect.top + rect.height + window.scrollY;

      if (x + popupWidth > viewportWidth) {
        x = viewportWidth - popupWidth;
      }

      if (y + popupHeight > viewportHeight) {
        y = viewportHeight - popupHeight;
      }

      element.nextElementSibling.style.display = 'block';
      element.nextElementSibling.style.left = x + 'px';
      element.nextElementSibling.style.top = y + 'px';
    }

    function hidePopup(element) {
      element.style.display = 'none';
    }

    document.addEventListener("DOMContentLoaded", function () {
      const toc = document.getElementById("table-of-contents");
      const tocList = toc.querySelector("ul");
      tocList.innerHTML = "";

      document.querySelectorAll("h2").forEach(function(h2, index) {
        const id = "subtitle" + (index + 1);
        h2.id = id;
        const listItem = document.createElement("li");
        listItem.innerHTML = `<a href="#${id}">${h2.textContent}</a>`;
        tocList.appendChild(listItem);
      });

      var footer = document.createElement("footer");
      footer.style.textAlign = "center";
      footer.style.fontSize = "15px";
      footer.innerHTML = 'Copyright <span id="year"></span>';
      document.body.appendChild(footer);

      document.getElementById("year").textContent = new Date().getFullYear();
    });
  </script>
  <style>
    p:last-child {
      margin-bottom: 50px;
    }
  </style>
</head>
<body>
  <h1>Title</h1>
  <div id="subheader">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div><br>

   <!-- Table of Contents -->
  <h4 onClick="toggleTOC()">Table of Contents &#9660;</h4>
  <div id="table-of-contents">
    <ul>
      <!-- Generated by JS -->
    </ul>
  </div>
  <!-- End Table of Contents -->

  <p>Lorem ipsum dolor sit amet<sup class="footnote-ref" id="ref1" onmouseover="showPopup(event, this)" onmouseout="hidePopup(this.nextElementSibling)">[1]</sup><span class="footnote-pop"></span>, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
  
  
  <h2 id="subtitle1">Introduction</h2>
  <p>Varius duis at consectetur lorem donec massa sapien faucibus. Velit egestas dui id ornare arcu. Aliquet nibh praesent tristique magna sit amet purus gravida quis. Tortor consequat id porta nibh venenatis cras.<br><br>
  Varius duis at consectetur lorem donec massa sapien faucibus. Velit egestas dui id ornare arcu. Aliquet nibh praesent tristique magna sit amet purus gravida quis.<br><br>
  Varius duis at consectetur lorem donec massa sapien faucibus. Velit egestas dui id ornare arcu. Aliquet nibh praesent tristique magna sit amet purus gravida quis.</p>

 <h2 id="subtitle1">Who's Writing This?</h2>
 <p>  Varius duis at consectetur lorem donec massa sapien faucibus. Velit egestas dui id ornare arcu. Aliquet nibh praesent tristique magna sit amet purus gravida quis.</p>
 <h2 id="subtitle1">Yadda Yadda Yadda</h2>
  <p>Varius duis at consectetur lorem donec massa sapien faucibus. Velit egestas dui id ornare arcu. Aliquet nibh praesent tristique magna sit amet purus gravida quis. Tortor consequat id porta nibh venenatis cras.<br><br>
  Varius duis at consectetur lorem donec massa sapien faucibus. Velit egestas dui id ornare arcu. Aliquet nibh praesent tristique magna sit amet purus gravida quis.<br><br>
  Varius duis at consectetur lorem donec massa sapien faucibus. Velit egestas dui id ornare arcu. Aliquet nibh praesent tristique magna sit amet purus gravida quis.</p>

  <h2>Footnotes</h2>
  <p style="margin-bottom: 50px;"><a class="footnote" data-footnote="1" href="#ref1">[1]</a><span id="footnote1"> <b>Varius duis</b>: At consectetur lorem donec massa sapien faucibus. Velit egestas dui id ornare arcu. Aliquet nibh praesent tristique magna sit amet purus gravida quis. Tortor consequat id porta nibh venenatis cras.</span></p>
</body>
</html>
